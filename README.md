# 智能PCB图像处理工作台

一个专业的PCB图像处理工具，支持图像预处理、颜色替换、智能简化、遮罩生成和批量导出功能。

## 🚀 主要功能

### 1. 图像上传与预处理
- **智能压缩**：自动压缩大图片，支持JPG、PNG、WebP格式
- **图像预处理**：亮度、对比度、饱和度调节
- **拖拽上传**：支持点击上传和拖拽上传两种方式
- **文件验证**：自动检测文件格式和大小

### 2. 多样化编辑工具
- **画笔工具**：精确编辑小区域，支持可调节画笔大小
- **套索工具**：自由选择不规则区域进行批量替换
- **填充工具**：智能填充相似颜色区域，支持容差调节
- **橡皮擦工具**：快速恢复原始颜色
- **撤销/重做**：支持多步撤销操作

### 3. 扩展颜色系统
- **预设色系**：蓝色、红色、紫色、绿色、黄色、橙色、粉色等7种预设
- **自定义色系**：完全自定义颜色配置
- **智能映射**：基于颜色距离的智能颜色映射算法
- **实时预览**：颜色选择实时预览效果

### 4. 智能图像简化
- **颜色量化**：将原图转换为指定颜色的简化图
- **边缘保持**：保持图像重要特征的同时简化颜色
- **实时生成**：选择色系后即时生成简化图像

### 5. 专业遮罩生成
- **分层遮罩**：为每种颜色生成独立遮罩图层
- **PCB图层**：自动生成常用PCB图层（铜皮层、阻焊层等）
- **定位标记**：自动添加四角定位标记
- **实物预览**：生成逼真的PCB实物效果图

### 6. 增强导出功能
- **多格式支持**：PNG、JPG、WebP格式导出
- **质量控制**：可调节图片质量和压缩比例
- **尺寸控制**：支持原始尺寸、缩放或自定义尺寸
- **批量打包**：一键下载所有图层的ZIP包
- **智能命名**：根据图层功能自动命名文件

## 🎨 新增功能

### 1. 图像预处理模块
```javascript
- 亮度调节：-50 到 +50
- 对比度调节：0.5 到 2.0
- 饱和度调节：0 到 2.0
- 实时预览效果
```

### 2. 扩展颜色系统
```javascript
// 新增颜色系
green: 绿色系 (深绿、浅绿、深青、浅青等)
yellow: 黄色系 (深黄、浅黄、深橙、浅橙等)  
orange: 橙色系 (深橙、浅橙、深红、浅红等)
pink: 粉色系 (深粉、浅粉、深紫、浅紫等)
custom: 自定义色系 (用户自定义颜色)
```

### 3. 高级编辑工具
- **橡皮擦工具**：快速恢复到原始颜色
- **增强套索**：更精确的选区绘制和预览
- **智能填充**：改进的洪水填充算法
- **画笔预览**：实时显示画笔影响范围

### 4. 画布交互优化
- **缩放功能**：支持画布放大/缩小查看细节
- **平移操作**：拖拽移动画布查看不同区域  
- **网格显示**：可选显示像素网格辅助编辑
- **快捷键**：支持常用操作快捷键

### 5. 用户体验改进
- **进度指示**：显示处理进度和状态
- **状态提示**：清晰的操作反馈和错误提示
- **响应式设计**：适配手机、平板等移动设备
- **操作引导**：工具提示和使用说明

## 📱 响应式设计

- **桌面端**：完整功能，大屏幕最佳体验
- **平板端**：优化布局，支持触摸操作
- **手机端**：简化界面，保留核心功能

## 🛠️ 技术优化

### 1. 代码结构优化
- **模块化设计**：分离HTML、CSS、JavaScript
- **类式架构**：面向对象的代码组织
- **配置集中**：统一的配置常量管理
- **错误处理**：完善的异常处理机制

### 2. 性能优化
- **图像压缩**：智能压缩减少内存占用
- **懒加载**：按需加载图像和资源
- **缓存机制**：编辑历史和状态缓存
- **异步处理**：避免界面阻塞

### 3. 内存管理
- **历史限制**：限制撤销历史数量防止内存泄漏
- **资源释放**：及时释放不需要的图像资源
- **垃圾回收**：优化对象生命周期管理

## 🎯 使用流程

1. **上传图片**：点击或拖拽上传PCB图片
2. **预处理**：调节亮度、对比度等参数
3. **编辑原图**：使用各种工具修改原图颜色
4. **选择色系**：选择预设色系或自定义配置
5. **编辑简化图**：对生成的简化图进行微调
6. **生成图层**：一键生成所有遮罩和合成图层
7. **导出结果**：下载单个图层或打包下载

## 🔧 技术栈

- **前端框架**：原生JavaScript (ES6+)
- **UI框架**：Tailwind CSS
- **图像处理**：Canvas API
- **文件处理**：JSZip, FileSaver.js
- **图像压缩**：browser-image-compression

## 📋 系统要求

- **浏览器**：Chrome 60+, Firefox 60+, Safari 12+, Edge 79+
- **内存**：建议4GB以上
- **存储**：无特殊要求
- **网络**：CDN资源需要网络连接

## 🚀 部署说明

1. 下载所有文件到服务器目录
2. 确保Web服务器支持静态文件服务
3. 访问index.html即可使用
4. 可配置CDN加速静态资源加载

## 📄 许可证

MIT License - 可自由使用、修改和分发

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

## 📞 支持

如有问题或建议，请通过Issue联系我们。